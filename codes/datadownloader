{"cells":[{"cell_type":"code","execution_count":1,"metadata":{"id":"_iUz7rqo9I1l","executionInfo":{"status":"ok","timestamp":1660202355125,"user_tz":-540,"elapsed":3234,"user":{"displayName":"­김동규","userId":"13850968458248669996"}}},"outputs":[],"source":["import torch\n","import torchvision\n","from torchvision import datasets"]},{"cell_type":"code","execution_count":3,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":8712,"status":"ok","timestamp":1660202371813,"user":{"displayName":"­김동규","userId":"13850968458248669996"},"user_tz":-540},"id":"hB1r3OrS9Pht","outputId":"bf21701f-0746-428c-a021-99d8f4e391a5"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive',force_remount=True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zmC0wDOQQ7Hg"},"outputs":[],"source":["%cd /content/drive/MyDrive/dataset/\n","!git clone https://github.com/cvdfoundation/kinetics-dataset\n"]},{"cell_type":"code","source":["data='1'\n","!mkdir '/content/drive/MyDrive/Colab Notebooks/졸프/pose_estimation/dataset/train/'$data\n"],"metadata":{"id":"_m8So47Q-M9P"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["arr=[]\n","arr"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"mj-MjRYfDOCZ","executionInfo":{"status":"ok","timestamp":1653225313353,"user_tz":-540,"elapsed":417,"user":{"displayName":"­김동규","userId":"13850968458248669996"}},"outputId":"5dee4014-d60e-4187-c0ea-6e86f85c92cf"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["[]"]},"metadata":{},"execution_count":169}]},{"cell_type":"code","source":["num=10"],"metadata":{"id":"mRsM-XtJnkQp","executionInfo":{"status":"ok","timestamp":1660202371813,"user_tz":-540,"elapsed":3,"user":{"displayName":"­김동규","userId":"13850968458248669996"}}},"execution_count":4,"outputs":[]},{"cell_type":"code","source":["import os\n","import tarfile\n","%cd /content/drive/MyDrive/dataset/kinetics-dataset/k400_targz/val/\n","\n","\n","target='val/'\n","data='part_'+str(num)\n","print(data)\n","\n","!mkdir '/content/drive/MyDrive/Colab Notebooks/졸프/pose_estimation/dataset/'$target$data\n","!tar -zxvf $data'.tar.gz' -C '/content/drive/MyDrive/Colab Notebooks/졸프/pose_estimation/dataset/'$target$data\n","num+=1"],"metadata":{"id":"FvdgSTzq4ak6","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1660208223619,"user_tz":-540,"elapsed":333,"user":{"displayName":"­김동규","userId":"13850968458248669996"}},"outputId":"4fc4c875-b920-4fec-f560-94816b89238d"},"execution_count":15,"outputs":[{"output_type":"stream","name":"stdout","text":["/content/drive/MyDrive/dataset/kinetics-dataset/k400_targz/val\n","part_20\n","tar (child): part_20.tar.gz: Cannot open: No such file or directory\n","tar (child): Error is not recoverable: exiting now\n","tar: Child returned status 2\n","tar: Error is not recoverable: exiting now\n"]}]},{"cell_type":"code","source":["import os\n","import numpy\n","import pickle\n","from time import time\n","%cd '/content/drive/MyDrive/Colab Notebooks/졸프/pose_estimation/newdataset/train/part_0'\n","file_list=os.listdir()\n","\n","for file in file_list:\n","  cur_time=time()\n","  spt=os.path.splitext(file)\n","  if spt[1]=='':\n","    with  open(file, 'rb') as f:\n","      pickle.load(f)\n","      print(\"pickle : \"+str(cur_time-time()))\n","  if spt[1]=='.npy':\n","    cur_time=time()\n","    numpy.load(file)\n","    print(\"np : \"+str(cur_time-time()))"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":1000},"id":"seK734NFKS3K","executionInfo":{"status":"error","timestamp":1658213163505,"user_tz":-540,"elapsed":19174,"user":{"displayName":"­김동규","userId":"13850968458248669996"}},"outputId":"b1ed2060-9436-4f9d-ce2e-b07c66aa9900"},"execution_count":null,"outputs":[{"output_type":"stream","name":"stdout","text":["/content/drive/MyDrive/Colab Notebooks/졸프/pose_estimation/newdataset/train/part_0\n","pickle : -2.124502182006836\n","pickle : -0.21996426582336426\n","pickle : -0.09068799018859863\n","pickle : -0.23263335227966309\n","pickle : -0.09330463409423828\n","pickle : -0.16081023216247559\n","pickle : -0.3010995388031006\n","pickle : -0.27608251571655273\n","pickle : -0.18761229515075684\n","pickle : -0.17179298400878906\n","pickle : -0.6120188236236572\n","pickle : -0.7220613956451416\n","pickle : -0.5666627883911133\n","pickle : -0.7106316089630127\n","pickle : -0.27132081985473633\n","pickle : -0.549910306930542\n","pickle : -0.7122001647949219\n","pickle : -0.5031182765960693\n","pickle : -0.5993914604187012\n","pickle : -0.592613697052002\n","pickle : -0.5421876907348633\n","pickle : -0.4627511501312256\n","pickle : -0.665966272354126\n","pickle : -0.4695625305175781\n","pickle : -0.4479837417602539\n","pickle : -0.5708472728729248\n","pickle : -0.5960588455200195\n","pickle : -0.6206378936767578\n","pickle : -0.5607666969299316\n","pickle : -0.5035066604614258\n","pickle : -0.48023295402526855\n","pickle : -0.1174626350402832\n","pickle : -0.6196544170379639\n","pickle : -0.5435457229614258\n","pickle : -0.5462520122528076\n","pickle : -0.5224535465240479\n"]},{"output_type":"error","ename":"KeyboardInterrupt","evalue":"ignored","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mKeyboardInterrupt\u001b[0m                         Traceback (most recent call last)","\u001b[0;32m<ipython-input-6-e53f922e3adf>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[1;32m     11\u001b[0m   \u001b[0;32mif\u001b[0m \u001b[0mspt\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m1\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m==\u001b[0m\u001b[0;34m''\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     12\u001b[0m     \u001b[0;32mwith\u001b[0m  \u001b[0mopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mfile\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m'rb'\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;32mas\u001b[0m \u001b[0mf\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m---> 13\u001b[0;31m       \u001b[0mpickle\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mload\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mf\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     14\u001b[0m       \u001b[0mprint\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"pickle : \"\u001b[0m\u001b[0;34m+\u001b[0m\u001b[0mstr\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mcur_time\u001b[0m\u001b[0;34m-\u001b[0m\u001b[0mtime\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m     15\u001b[0m   \u001b[0;32mif\u001b[0m \u001b[0mspt\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;36m1\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m==\u001b[0m\u001b[0;34m'.npy'\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.7/dist-packages/torch/storage.py\u001b[0m in \u001b[0;36m_load_from_bytes\u001b[0;34m(b)\u001b[0m\n\u001b[1;32m    215\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    216\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 217\u001b[0;31m \u001b[0;32mdef\u001b[0m \u001b[0m_load_from_bytes\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mb\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    218\u001b[0m     \u001b[0;32mreturn\u001b[0m \u001b[0mtorch\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mload\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mio\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mBytesIO\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mb\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    219\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mKeyboardInterrupt\u001b[0m: "]}]},{"cell_type":"code","execution_count":null,"metadata":{"id":"F6fPxqsUYdWx"},"outputs":[],"source":["%cd /content/drive/MyDrive/dataset/kinetics-dataset\n","!bash ./k400_downloader.sh"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"HKDfpqe39HPy"},"outputs":[],"source":["%cd /content/drive/MyDrive/dataset/kinetics-dataset\n","!bash ./k400_extractor.sh"]}],"metadata":{"colab":{"name":"datadownloader","provenance":[],"mount_file_id":"1zYAPbLMuwRVzeRf6EY9ksJpS_GlaNI4x","authorship_tag":"ABX9TyOXbYAbZuIUKeT5VpwZuMnV"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}